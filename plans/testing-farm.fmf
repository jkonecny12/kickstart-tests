summary: TMT/TFT plan for running kickstart tests on Fedora system
description: |
    Run kickstart tests on Fedora

discover:
    how: shell
    tests:
    - name: 'repository: kickstart-tests'
      framework: shell
      test: cd /root/kickstart-tests && scripts/run_travis.sh
      duration: 6h

provision:
    hardware:
        virtualization:
            is-supported: true

prepare:
    - name: Update guest
      how: shell
      script: |
        dnf distro-sync -y && dnf install -y git

    - name: prepare repository
      how: shell
      script: |
        git clone https://github.com/rhinstaller/kickstart-tests /root/kickstart-tests
        cd /root/kickstart-tests
        git fetch origin +refs/pull/*:refs/remotes/origin/pr/*
        git checkout origin/pr/$PR_NUMBER/head

execute:
    how: tmt
